<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>CI / CD with JavaScript</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/baloise.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/atom-one-dark.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>a
<div class="reveal">
    <div class="slides">
        <section class="deck-slide" data-background="#E5F3F9">
            <h1>Continuous Delivery of JavaScript packages</h1>
            <h2>in an enterprise environment</h2>
        </section>
        <section class="about-slide">
            <h2>About us</h2>
            <div>
                <div class="about">
                    <img class="profile" width="250" height="250" alt="Marius" src="img/joachim-schlienger.jpeg">
                    <h3>Joachim Schlienger</h3>
                    <h3><a href="">Software Engineer @ Baloise</a></h3>
                    <img height="90px" src="img/baloise.png">
                </div>
                <div class="about">
                    <img class="profile" width="250" height="250" alt="Joachim" src="img/joachim-prinzbach.jpeg">
                    <h3>Joachim Prinzbach</h3>
                    <h3><a href="">Software Engineer @ Baloise</a></h3>
                    <img height="90px" src="img/baloise.png">
                </div>
            </div>
        </section>
        <section>
            <h2>About Baloise</h2>
            <h3>...</h3>
        </section>
        <section data-background="#FFFFFF">
            <h3>Our tools in Java</h3>
            <img src="img/tools.png"/>
        </section>
        <section data-background="#FFFFFF">
            <h3>Our workflow for Java artifacts</h3>
            <img src="img/workflow.png"/>
        </section>
        <section class="deck-slide" data-background="#E5F3F9">
            <h1>Continuous delivery concepts</h1>
        </section>
        <section>
            <section>
                <h2>Versioning and SNAPSHOTS</h2>
                <img src="img/semver.png"/>
            </section>
            <section>
                <h3>Our approach in Java</h3>
                <ul>
                    <li>not exactly semantic versioning ;-)</li>
                    <li>SNAPSHOTS!</li>
                    <li>not tagged</li>
                    <li>not stable</li>
                    <li>not reproducible</li>
                    <li>easy for development</li>
                    <li>built and published after every push on ci</li>
                </ul>
            </section>
            <section>
                <h3>Different versioning concepts in JavaScript</h3>
                <ul>
                    <li>alpha / beta prereleases</li>
                    <li>semver as best practice</li>
                    <li>prereleases are tagged and reproducible</li>
                    <li>only built and published locally and manually</li>
                </ul>
            </section>
            <section>
                <h3>Our solution</h3>
                <h4>some picks from two worlds</h4>
                <ul>
                    <li>build and release happens on ci</li>
                    <li>prereleases built and published on push</li>
                    <li>semver to communicate changes on release</li>
                    <li>developer uses jenkins job to release major / minor / patch</li>
                </ul>
            </section>
        </section>
        <section>
            <section>
                <h2>Tagging</h2>
                <h4>Know the source of your artifact</h4>
                <img src="img/tag.png"/>
            </section>
            <section>
                <h3>Tagging locally vs. centrally on ci</h3>
                <ul>
                    <li>Tagging locally vs. centrally on ci</li>
                </ul>
            </section>
        </section>
        <section>
            <section data-background="#E5F3F9">
                <h2>Release</h2>
                <img src="img/release.png"/>
            </section>
            <section>

            </section>
        </section>
        <section>
            <section data-background="#E5F3F9">
                <h3>Self contained builds</h3>
                <h4>Jenkinsfile in GIT, no buildtools installed on Jenkins</h4>
                <pre>
                    <code class="hljs groovy" data-trim contenteditable>
                    pipeline {
                        agent { docker 'maven:3-alpine' }
                        stages {
                            stage('Example Build') {
                                steps {
                                    sh 'mvn -B clean verify'
                                }
                            }
                        }
                    }
                    </code>
                </pre>
            </section>
            <section>
                <h3>No NodeJS installed on CI server</h3>
                <h4>But We want self contained builds!</h4>
                <ul>
                    <li class="fragment">a project defines its required NodeJS version</li>
                    <li class="fragment">that NodeJS version will be downloaded locally and on CI</li>
                    <li class="fragment">gradle or maven can be used to define and download</li>
                </ul>
            </section>
            <section>
                <h3>a big corporate enterprise</h3>
                <h4>security, corporate proxy and governance</h4>
                <ul>
                    <li>not able to download any executables</li>
                    <li>or archives</li>
                    <li>or NodeJS</li>
                    <li>or npm packages</li>
                    <li>ensure an immutable history of released artifacts</li>
                </ul>
            </section>
        </section>
        <section data-background="#E5F3F9">
            <h3>Build once</h3>
            <img src="img/buildonce.png"/>
        </section>
        <section data-background="#E5F3F9">
            <h3>Standardized process and tools</h3>
            <h4>Standard api built on best practices - freedom to adjust</h4>
            <img src="img/buildonce.png"/>
        </section>
        <section>
            <h3>reproducible builds</h3>
            <h4>without SNAPSHOT dependencies</h4>
        </section>
        <section>
            <section class="deck-slide" data-background="#E5F3F9">
                <h2>Intro to NodeJS & NPM</h2>
            </section>
        </section>
        <section>
            <section>
                <h3>Example using Frontend-Maven Plugin</h3>
                <pre>
                    <code class="hljs xml" data-trim contenteditable>
                        &lt;plugin>
                          &lt;groupId>com.github.eirslett&lt;/groupId>
                          &lt;artifactId>frontend-maven-plugin&lt;/artifactId>
                          &lt;executions>
                            &lt;execution>
                              &lt;id>install node&lt;/id>
                              &lt;goals>
                                &lt;goal>install-node-and-npm&lt;/goal>
                              &lt;/goals>
                              &lt;phase>generate-resources&lt;/phase>
                            &lt;/execution>
                          &lt;/executions>
                          &lt;configuration>
                            &lt;nodeVersion>v8.11.2&lt;/nodeVersion>
                            &lt;nodeDownloadRoot>${nexusNodeJS}&lt;/nodeDownloadRoot>
                          &lt;/configuration>
                        &lt;/plugin>
                    </code>
                </pre>
            </section>
            <section>
                <h3>Publish workflow similar to Java</h3>
                <h4>clean, build, test, publish to repository</h4>
            </section>
            <section>
                <h3>Java Delevopers -> </h3>
            </section>
            <section>
                <h3></h3>
            </section>
        </section>
        <section>
            <section data-background="#E5F3F9">
                <h2>Our tools in Java</h2>
                <ul>
                    <li>First</li>
                    <li>Second</li>
                </ul>
            </section>
            <section>
                <h2>Navigating vertically</h2>
            </section>
        </section>
        <section>
            <h2>Groovy code example</h2>
            <pre>
                <code class="hljs groovy" data-trim contenteditable>
                pipeline {
                    agent { docker 'maven:3-alpine' }
                    stages {
                        stage('Example Build') {
                            steps {
                                sh 'mvn -B clean verify'
                            }
                        }
                    }
                }
                </code>
            </pre>
        </section>
        <section>
            <h3>image</h3>
            <img src="img/semantic-versioning.png"/>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }
        ]
    });
</script>
</body>
</html>
